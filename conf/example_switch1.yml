# example:
# - two on/off switches
# - turns on the light when at least one switch is turned on
#
# you can control the switch by curl (rest api):
#   curl http://localhost:9128/api/metric/switch1 -d "switch_state=on" -X PUT    
#   curl http://localhost:9128/api/metric/switch1 -d "switch_state=off" -X PUT    
#
# look at the result (Firefox recommended for json response):
#   http://localhost:9128/api/metrics/by_node


virtual:
    switch1:
        addr: "1"
        sensors:
            switch_state: switch

        # default value after system start
        default:
            switch_state: off

    switch2:
        addr: "2"
        sensors:
            switch_state: switch
        default:
            switch_state: off

    light:
        addr: "3"
        actuators:
            relay_state: switch
        default:
            switch_state: off

        # this sensor monitors the activity of other sensors
        watch:
            - switch1
            - switch2

        # the following metric will be calculated
        eval:
            relay_state: "switch1['switch_state'] or switch2['switch_state']"
    
